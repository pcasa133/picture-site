import{u as Ce,R as De,r as m,V as S,T as Re,a as ye,j as c,B as Fe,D as Te,M as V,C as ke,b as Ne,c as qe,d as Me}from"./three-QvK4sKc3.js";import"./vendor-BtP0CW_r.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();function be(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=be(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function M(){for(var e,t,r=0,i="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=be(e))&&(i&&(i+=" "),i+=t);return i}const Le={},de=e=>{let t;const r=new Set,i=(g,u)=>{const I=typeof g=="function"?g(t):g;if(!Object.is(I,t)){const v=t;t=u??(typeof I!="object"||I===null)?I:Object.assign({},t,I),r.forEach(w=>w(t,v))}},n=()=>t,p={setState:i,getState:n,getInitialState:()=>P,subscribe:g=>(r.add(g),()=>r.delete(g)),destroy:()=>{(Le?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},P=t=e(i,n,p);return p},$e=e=>e?de(e):de,xe={},{useDebugValue:Ue}=De,{useSyncExternalStoreWithSelector:Be}=Ce;let ue=!1;const We=e=>e;function Ze(e,t=We,r){(xe?"production":void 0)!=="production"&&r&&!ue&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ue=!0);const i=Be(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Ue(i),i}const le=e=>{(xe?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?$e(e):e,r=(i,n)=>Ze(t,i,n);return Object.assign(r,t),r},Ge=e=>e?le(e):le;var Ie=Symbol.for("immer-nothing"),me=Symbol.for("immer-draftable"),h=Symbol.for("immer-state");function x(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var D=Object.getPrototypeOf;function R(e){return!!e&&!!e[h]}function j(e){var t;return e?Pe(e)||Array.isArray(e)||!!e[me]||!!((t=e.constructor)!=null&&t[me])||W(e)||Z(e):!1}var He=Object.prototype.constructor.toString();function Pe(e){if(!e||typeof e!="object")return!1;const t=D(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===He}function L(e,t){B(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,i)=>t(i,r,e))}function B(e){const t=e[h];return t?t.type_:Array.isArray(e)?1:W(e)?2:Z(e)?3:0}function X(e,t){return B(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Se(e,t,r){const i=B(e);i===2?e.set(t,r):i===3?e.add(r):e[t]=r}function Ke(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function W(e){return e instanceof Map}function Z(e){return e instanceof Set}function A(e){return e.copy_||e.base_}function Y(e,t){if(W(e))return new Map(e);if(Z(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Pe(e);if(t===!0||t==="class_only"&&!r){const i=Object.getOwnPropertyDescriptors(e);delete i[h];let n=Reflect.ownKeys(i);for(let o=0;o<n.length;o++){const a=n[o],s=i[a];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(i[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(D(e),i)}else{const i=D(e);if(i!==null&&r)return{...e};const n=Object.create(i);return Object.assign(n,e)}}function ne(e,t=!1){return G(e)||R(e)||!j(e)||(B(e)>1&&(e.set=e.add=e.clear=e.delete=Qe),Object.freeze(e),t&&Object.entries(e).forEach(([r,i])=>ne(i,!0))),e}function Qe(){x(2)}function G(e){return Object.isFrozen(e)}var Ve={};function z(e){const t=Ve[e];return t||x(0,e),t}var k;function ve(){return k}function Xe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function fe(e,t){t&&(z("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function J(e){ee(e),e.drafts_.forEach(Ye),e.drafts_=null}function ee(e){e===k&&(k=e.parent_)}function pe(e){return k=Xe(k,e)}function Ye(e){const t=e[h];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ge(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[h].modified_&&(J(t),x(4)),j(e)&&(e=$(t,e),t.parent_||U(t,e)),t.patches_&&z("Patches").generateReplacementPatches_(r[h].base_,e,t.patches_,t.inversePatches_)):e=$(t,r,[]),J(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ie?e:void 0}function $(e,t,r){if(G(t))return t;const i=t[h];if(!i)return L(t,(n,o)=>_e(e,i,t,n,o,r)),t;if(i.scope_!==e)return t;if(!i.modified_)return U(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const n=i.copy_;let o=n,a=!1;i.type_===3&&(o=new Set(n),n.clear(),a=!0),L(o,(s,p)=>_e(e,i,n,s,p,r,a)),U(e,n,!1),r&&e.patches_&&z("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function _e(e,t,r,i,n,o,a){if(R(n)){const s=o&&t&&t.type_!==3&&!X(t.assigned_,i)?o.concat(i):void 0,p=$(e,n,s);if(Se(r,i,p),R(p))e.canAutoFreeze_=!1;else return}else a&&r.add(n);if(j(n)&&!G(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;$(e,n),(!t||!t.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,i)&&U(e,n)}}function U(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ne(t,r)}function Je(e,t){const r=Array.isArray(e),i={type_:r?1:0,scope_:t?t.scope_:ve(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=i,o=oe;r&&(n=[i],o=N);const{revoke:a,proxy:s}=Proxy.revocable(n,o);return i.draft_=s,i.revoke_=a,s}var oe={get(e,t){if(t===h)return e;const r=A(e);if(!X(r,t))return et(e,r,t);const i=r[t];return e.finalized_||!j(i)?i:i===H(e.base_,t)?(K(e),e.copy_[t]=re(i,e)):i},has(e,t){return t in A(e)},ownKeys(e){return Reflect.ownKeys(A(e))},set(e,t,r){const i=we(A(e),t);if(i!=null&&i.set)return i.set.call(e.draft_,r),!0;if(!e.modified_){const n=H(A(e),t),o=n==null?void 0:n[h];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Ke(r,n)&&(r!==void 0||X(e.base_,t)))return!0;K(e),te(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return H(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,K(e),te(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=A(e),i=Reflect.getOwnPropertyDescriptor(r,t);return i&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:i.enumerable,value:r[t]}},defineProperty(){x(11)},getPrototypeOf(e){return D(e.base_)},setPrototypeOf(){x(12)}},N={};L(oe,(e,t)=>{N[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});N.deleteProperty=function(e,t){return N.set.call(this,e,t,void 0)};N.set=function(e,t,r){return oe.set.call(this,e[0],t,r,e[0])};function H(e,t){const r=e[h];return(r?A(r):e)[t]}function et(e,t,r){var n;const i=we(t,r);return i?"value"in i?i.value:(n=i.get)==null?void 0:n.call(e.draft_):void 0}function we(e,t){if(!(t in e))return;let r=D(e);for(;r;){const i=Object.getOwnPropertyDescriptor(r,t);if(i)return i;r=D(r)}}function te(e){e.modified_||(e.modified_=!0,e.parent_&&te(e.parent_))}function K(e){e.copy_||(e.copy_=Y(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var tt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,i)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const a=this;return function(p=o,...P){return a.produce(p,g=>r.call(this,g,...P))}}typeof r!="function"&&x(6),i!==void 0&&typeof i!="function"&&x(7);let n;if(j(t)){const o=pe(this),a=re(t,void 0);let s=!0;try{n=r(a),s=!1}finally{s?J(o):ee(o)}return fe(o,i),ge(n,o)}else if(!t||typeof t!="object"){if(n=r(t),n===void 0&&(n=t),n===Ie&&(n=void 0),this.autoFreeze_&&ne(n,!0),i){const o=[],a=[];z("Patches").generateReplacementPatches_(t,n,o,a),i(o,a)}return n}else x(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(a,...s)=>this.produceWithPatches(a,p=>t(p,...s));let i,n;return[this.produce(t,r,(a,s)=>{i=a,n=s}),i,n]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){j(e)||x(8),R(e)&&(e=rt(e));const t=pe(this),r=re(e,void 0);return r[h].isManual_=!0,ee(t),r}finishDraft(e,t){const r=e&&e[h];(!r||!r.isManual_)&&x(9);const{scope_:i}=r;return fe(i,t),ge(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));const i=z("Patches").applyPatches_;return R(e)?i(e,t):this.produce(e,n=>i(n,t))}};function re(e,t){const r=W(e)?z("MapSet").proxyMap_(e,t):Z(e)?z("MapSet").proxySet_(e,t):Je(e,t);return(t?t.scope_:ve()).drafts_.push(r),r}function rt(e){return R(e)||x(10,e),Ae(e)}function Ae(e){if(!j(e)||G(e))return e;const t=e[h];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Y(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Y(e,!0);return L(r,(i,n)=>{Se(r,i,Ae(n))}),t&&(t.finalized_=!1),r}var y=new tt,it=y.produce;y.produceWithPatches.bind(y);y.setAutoFreeze.bind(y);y.setUseStrictShallowCopy.bind(y);y.applyPatches.bind(y);y.createDraft.bind(y);y.finishDraft.bind(y);const nt=e=>(t,r,i)=>(i.setState=(n,o,...a)=>{const s=typeof n=="function"?it(n):n;return t(s,o,...a)},e(i.setState,r,i)),ot=nt;/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const O=Ge(ot(e=>({didInit:!1,images:null,layout:"sphere",layouts:null,nodePositions:null,highlightNodes:null,isSidebarOpen:!1,targetImage:null,resetCam:!1,cameraCurrentZ:0}))),at=[{id:"Img_bea_01.png",description:"Uma bela vista da categoria 'bea', item número 1. Detalhes incríveis e cores vibrantes."},{id:"Img_bea_02.png",description:"Explorando o item 2 da série 'bea'. Uma composição verdadeiramente inspiradora."},{id:"Img_bea_03.png",description:"A terceira imagem da coleção 'bea', capturando um momento único e especial."},{id:"Img_bea_04.png",description:"Item 'bea' de número 4. A luz e sombra criam uma atmosfera mágica aqui."},{id:"Img_bea_05.png",description:"Descobrindo a beleza no quinto exemplar 'bea'. Uma cena para ser admirada."},{id:"Img_bea_06.png",description:"Sexta representação 'bea'. Texturas ricas e uma perspectiva envolvente."},{id:"Img_bea_07.png",description:"A arte em 'bea', número 7. Cada detalhe conta uma história diferente."},{id:"Img_bea_08.png",description:"Oitava maravilha da série 'bea'. Um convite à contemplação e imaginação."},{id:"Img_bea_09.png",description:"Quase no fim da linha 'bea', imagem 9. Simplesmente espetacular e memorável."},{id:"Img_bea_10.png",description:"Fechando a categoria 'bea' com a décima imagem. Uma obra-prima visual."},{id:"Img_skate_01.png",description:"Radical! A primeira imagem de 'skate'. Manobras e estilo em cada pixel."},{id:"Img_skate_02.png",description:"Item 2 da série 'skate'. A cultura urbana capturada em um instante."},{id:"Img_skate_03.png",description:"A terceira imagem da coleção 'skate', mostrando a energia das ruas."},{id:"Img_skate_04.png",description:"Adrenalina pura no item 'skate' de número 4. Liberdade sobre rodas."},{id:"Img_skate_05.png",description:"O quinto exemplar 'skate'. A arte do equilíbrio e da criatividade."},{id:"Img_skate_06.png",description:"Sexta foto 'skate'. Um olhar sobre a paixão pelo esporte e pela vida."},{id:"Img_skate_07.png",description:"A vibe 'skate' no número 7. Expressão e movimento em harmonia."},{id:"Img_skate_08.png",description:"Oitava imagem da série 'skate'. Superando limites e desafiando a gravidade."},{id:"Img_skate_09.png",description:"Chegando ao fim da sessão 'skate', imagem 9. Atitude e originalidade."},{id:"Img_skate_10.png",description:"Encerrando a categoria 'skate' com a imagem 10. Puro talento e dedicação."},{id:"Img_head_01.png",description:"Foco no detalhe: primeira imagem 'head'. Expressões que falam por si."},{id:"Img_head_02.png",description:"Item 2 da série 'head'. Um retrato da individualidade e estilo."},{id:"Img_head_03.png",description:"A terceira imagem 'head', capturando a essência e a personalidade."},{id:"Img_head_04.png",description:"Olhares e pensamentos no item 'head' de número 4. Profundidade e emoção."},{id:"Img_head_05.png",description:"O quinto exemplar 'head'. A beleza está nos detalhes únicos."},{id:"Img_head_06.png",description:"Sexta foto 'head'. Uma janela para a alma e suas histórias."},{id:"Img_head_07.png",description:"A perspectiva 'head' no número 7. Cada rosto, um universo."},{id:"Img_head_08.png",description:"Oitava imagem da série 'head'. Força, caráter e autenticidade."},{id:"Img_head_09.png",description:"Retrato finalizando a série 'head', imagem 9. Singularidade em destaque."},{id:"Img_head_10.png",description:"Concluindo 'head' com a décima imagem. A história por trás de cada olhar."},{id:"Img_tenis_01.png",description:"Estilo nos pés: imagem 1 de 'tenis'. Design e conforto se encontram."},{id:"Img_tenis_02.png",description:"Item 2 da série 'tenis'. Mais que um calçado, uma declaração."},{id:"Img_tenis_03.png",description:"A terceira imagem 'tenis', mostrando inovação e atitude."},{id:"Img_tenis_04.png",description:"Performance e moda no item 'tenis' número 4. Pronto para qualquer jornada."},{id:"Img_tenis_05.png",description:"O quinto exemplar 'tenis'. Detalhes que fazem toda a diferença."},{id:"Img_tenis_06.png",description:"Sexta foto 'tenis'. A combinação perfeita de funcionalidade e estética."},{id:"Img_tenis_07.png",description:"A tendência 'tenis' no número 7. Conectando você ao seu caminho."},{id:"Img_tenis_08.png",description:"Oitava imagem da série 'tenis'. Durabilidade e um visual impecável."},{id:"Img_tenis_09.png",description:"Quase lá na coleção 'tenis', imagem 9. Para quem não abre mão de estilo."},{id:"Img_tenis_10.png",description:"Fechando 'tenis' com a décima imagem. A escolha certa para seus passos."},{id:"Img_bag_01.png",description:"Acessório essencial: primeira imagem 'bag'. Praticidade e elegância."},{id:"Img_bag_02.png",description:"Item 2 da série 'bag'. Leve tudo o que precisa com muito estilo."},{id:"Img_bag_03.png",description:"A terceira imagem 'bag', design inteligente para o dia a dia."},{id:"Img_bag_04.png",description:"Funcionalidade e charme no item 'bag' número 4. Sua companheira ideal."},{id:"Img_bag_05.png",description:"O quinto exemplar 'bag'. Detalhes que refletem sua personalidade."},{id:"Img_bag_06.png",description:"Sexta foto 'bag'. Organização e um toque de sofisticação."},{id:"Img_bag_07.png",description:"O look completo com 'bag' número 7. Versatilidade para todas as ocasiões."},{id:"Img_bag_08.png",description:"Oitava imagem da série 'bag'. Qualidade e design que impressionam."},{id:"Img_bag_09.png",description:"Finalizando a coleção 'bag', imagem 9. O detalhe que faltava."},{id:"Img_bag_10.png",description:"Concluindo 'bag' com a décima imagem. Perfeita para suas aventuras."},{id:"Img_food_01.png",description:"Delícia à vista: primeira imagem 'food'. Sabores que encantam."},{id:"Img_food_02.png",description:"Item 2 da série 'food'. Uma experiência gastronômica inesquecível."},{id:"Img_food_03.png",description:"A terceira imagem 'food', arte culinária que inspira."},{id:"Img_food_04.png",description:"Ingredientes frescos e paixão no item 'food' número 4. Para todos os paladares."},{id:"Img_food_05.png",description:"O quinto exemplar 'food'. Uma verdadeira festa de cores e sabores."},{id:"Img_food_06.png",description:"Sexta foto 'food'. Tradição e inovação em cada prato."},{id:"Img_food_07.png",description:"O prazer de comer bem com 'food' número 7. Momentos deliciosos."},{id:"Img_food_08.png",description:"Oitava imagem da série 'food'. Da cozinha para sua mesa, com carinho."},{id:"Img_food_09.png",description:"Quase na sobremesa da coleção 'food', imagem 9. Uma tentação irresistível."},{id:"Img_food_10.png",description:"Fechando o cardápio 'food' com a décima imagem. Bom apetite e volte sempre!"}];/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const Oe=O.getState,F=O.setState,st=async()=>{if(Oe().didInit)return;F(o=>{o.didInit=!0});const[e,t]=await Promise.all(["sphere","umap-grid"].map(o=>fetch(`/picture-site/${o}.json`).then(a=>a.json()))),r=at,i=Object.values(e),n=Object.values(t).map(([o,a])=>[o,a/(16/9)+.25]);F(o=>{o.images=r,o.rawLayoutPositions={sphere:i,grid:n},o.nodePositions=Object.fromEntries(r.map(({id:a})=>[a,[.5,.5,.5]])),o.layouts={}}),ie("sphere")},ie=e=>{F(t=>{t.layout=e;const r=t.rawLayoutPositions[e];if(!r){console.error(`Layout positions for "${e}" not found in state.rawLayoutPositions.`),t.nodePositions=Object.fromEntries(t.images.map(({id:n})=>[n,[.5,.5,.5]]));return}const i={};t.images.forEach((n,o)=>{o<r.length?i[n.id]=r[o]:i[n.id]=r[r.length-1]||[.5,.5,.5]}),t.nodePositions=i})},ae=async e=>{e===Oe().targetImage&&(e=null),F(t=>{t.targetImage=e,t.highlightNodes=null,e===null&&(t.resetCam=!0)})},ct=()=>{F(e=>{e.isSidebarOpen=!e.isSidebarOpen})},dt=e=>{F(t=>{t.isSidebarOpen=e})},ut=1,se=3e3,je=se*ut;console.log("🔥 TAMANHO DAS IMAGENS:",se,"x",je);const lt=({id:e,position:t,targetImage:r})=>{const i=`/picture-site/assets/images/${e}`,n=m.useRef(),o=m.useRef(),[a,s]=m.useState(null),[p,P]=m.useState(!1),[g,u]=m.useState(!1),I=m.useRef(new S(...t)),v=m.useRef(new S(...t)),w=m.useRef(1),E=m.useRef(0),T=m.useRef(1),C=m.useRef(1);m.useEffect(()=>{new Re().load(i,l=>{s(l),P(!0)},void 0,l=>{console.error(`[PhotoNode.jsx] Failed to load texture for ${e}:`,l),P(!0)})},[i,e]),m.useEffect(()=>{I.current.set(...t)},[t]);const d=r===e;return m.useEffect(()=>{!r||d?(w.current=1,T.current=d?1.2:1):(w.current=.3,T.current=.8)},[r,d]),ye((f,l)=>{if(p&&(o.current&&(v.current.lerp(I.current,l*3),o.current.position.copy(v.current)),n.current&&n.current.material)){E.current=V.lerp(E.current,w.current,l*4),n.current.material.opacity=E.current,C.current=V.lerp(C.current,T.current,l*5);const _=g?1.1:1,b=C.current*_;n.current.scale.setScalar(b)}}),p?c.jsx("group",{ref:o,onClick:f=>{f.stopPropagation(),ae(e)},onPointerEnter:()=>u(!0),onPointerLeave:()=>u(!1),children:c.jsx(Fe,{children:c.jsxs("mesh",{ref:n,scale:[je,se,1],children:[c.jsx("planeGeometry",{args:[1,1]}),c.jsx("meshBasicMaterial",{map:a,color:a?"white":"lime",transparent:!0,opacity:E.current,side:Te})]})})}):null};function mt(){const{images:e,nodePositions:t,layout:r,targetImage:i,resetCam:n}=O(d=>({images:d.images,nodePositions:d.nodePositions,layout:d.layout,targetImage:d.targetImage,resetCam:d.resetCam})),{camera:o}=Ne(),a=m.useRef(),s=m.useRef(),[p,P]=m.useState(!1),g=m.useRef(0),u=m.useRef({isAnimating:!1,startTime:0,duration:800,startPosition:new S,targetPosition:new S,startTarget:new S,targetTarget:new S}),I=.1,v=.5,w=25,E=()=>{P(!1),g.current=0,u.current.isAnimating=!1},T=()=>{},C=d=>d<.5?2*d*d:-1+(4-2*d)*d;return m.useEffect(()=>{if(o&&s.current&&a.current){if(i&&t){P(!1),g.current=0;const d=t[i];if(!d){console.warn(`No node position found for targetImage: ${i}`);return}const f=(d[0]-.5)*800,l=(d[1]-.5)*800,_=((d[2]||0)-.5)*800,b=a.current.rotation.y,ze=a.current.position.z,ce=new S(f*Math.cos(b)-_*Math.sin(b),l,f*Math.sin(b)+_*Math.cos(b)+ze),q=o.position.clone().sub(s.current.target);q.lengthSq()===0&&q.set(0,0,1),q.normalize().multiplyScalar(w);const Ee=ce.clone().add(q);u.current.isAnimating=!0,u.current.startTime=Date.now(),u.current.startPosition.copy(o.position),u.current.targetPosition.copy(Ee),u.current.startTarget.copy(s.current.target),u.current.targetTarget.copy(ce)}else if(!i){const d=new S(0,0,50),f=new S(0,0,0);u.current.isAnimating=!0,u.current.startTime=Date.now(),u.current.startPosition.copy(o.position),u.current.targetPosition.copy(d),u.current.startTarget.copy(s.current.target),u.current.targetTarget.copy(f)}}},[i,t,o]),m.useEffect(()=>{if(a.current){const d=r==="grid"?150:0,f=a.current.position.z,l=()=>{let _=0;const b=()=>{if(_+=.02,_>=1){a.current.position.z=d;return}a.current.position.z=V.lerp(f,d,C(_)),requestAnimationFrame(b)};b()};Math.abs(f-d)>.1&&l(),n&&(a.current.rotation.set(0,0,0),O.setState(_=>{_.resetCam=!1}))}},[r,n]),ye((d,f)=>{if(O.setState({cameraCurrentZ:o.position.z}),u.current.isAnimating&&o&&s.current){const l=Date.now()-u.current.startTime,_=Math.min(l/u.current.duration,1),b=C(_);o.position.lerpVectors(u.current.startPosition,u.current.targetPosition,b),s.current.target.lerpVectors(u.current.startTarget,u.current.targetTarget,b),_>=1&&(u.current.isAnimating=!1,o.position.copy(u.current.targetPosition),s.current.target.copy(u.current.targetTarget))}if(!u.current.isAnimating){let l=g.current;p?l+=(I-l)*v*f:l+=(0-l)*v*f,g.current=l,a.current&&Math.abs(l)>1e-4&&r!=="grid"&&!i&&(a.current.rotation.y+=l*f)}s.current&&s.current.update()}),c.jsxs(c.Fragment,{children:[c.jsx("ambientLight",{intensity:2.3}),c.jsx(qe,{ref:s,onStart:E,onEnd:T,minDistance:1,maxDistance:500,noPan:!0}),c.jsx("group",{ref:a,children:e==null?void 0:e.map(d=>{const f=t==null?void 0:t[d.id];if(!f)return console.warn(`[PhotoViz.jsx] No position found for image ID: ${d.id}`),null;const l=[(f[0]-.5)*800,(f[1]-.5)*800,((f[2]||0)-.5)*800];return c.jsx(lt,{id:d.id,position:l,targetImage:i},d.id)})})]})}function ft(){return c.jsx(ke,{camera:{position:[0,0,50],near:.1,far:1e4},onPointerMissed:()=>ae(null),children:c.jsx(mt,{})})}const Q=(e,t=7)=>{if(!e)return"";const r=e.split(" ");return r.length<=t?e:r.slice(0,t).join(" ")+" ..."},pt=()=>{const{images:e,targetImage:t,isSidebarOpen:r}=O(a=>({images:a.images,targetImage:a.targetImage,isSidebarOpen:a.isSidebarOpen})),i=e?e.find(a=>a.id===t):null,n=e?[...e].sort((a,s)=>a.id.localeCompare(s.id)):[],o=()=>{dt(!r)};return c.jsxs("div",{className:`fixed top-0 right-0 h-full bg-gray-800 bg-opacity-90 text-white p-4 transition-transform duration-300 ease-in-out transform ${r?"translate-x-0":"translate-x-full"} w-80 md:w-96 z-30 shadow-lg`,children:[c.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors text-2xl z-40 w-8 h-8 flex items-center justify-center",children:"×"}),i&&c.jsxs("div",{className:"mb-6 pt-8",children:[c.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Selected Image"}),c.jsxs("div",{className:"bg-gray-700 p-3 rounded-lg shadow-md",children:[c.jsx("img",{src:`/picture-site/assets/images/${i.id}`,alt:i.description,className:"w-full h-auto object-cover rounded-md mb-2 shadow-sm"}),c.jsx("p",{className:"text-sm text-gray-300 leading-relaxed",children:Q(i.description,3)})]})]}),c.jsxs("ul",{children:[n.map(a=>c.jsxs("li",{onClick:()=>ae(a.id),className:`cursor-pointer p-2 hover:bg-gray-700 rounded-md transition-colors duration-150 flex items-center space-x-3 ${t===a.id?"bg-blue-500 bg-opacity-40":""}`,children:[c.jsx("img",{src:`/picture-site/assets/images/${a.id}`,alt:Q(a.description,3),className:"w-32 h-32 object-cover rounded-sm shadow-sm"}),c.jsx("div",{children:c.jsx("p",{children:Q(a.description,3)})})]},a.id)),(!e||e.length===0)&&c.jsx("li",{children:"No images available."})]})]})};function gt(){var a;const{layout:e,isSidebarOpen:t,images:r,targetImage:i,cameraCurrentZ:n}=O(s=>({layout:s.layout,isSidebarOpen:s.isSidebarOpen,images:s.images,targetImage:s.targetImage,cameraCurrentZ:s.cameraCurrentZ})),o=i&&r?(a=r.find(s=>s.id===i))==null?void 0:a.description:null;return m.useEffect(()=>{st()},[]),c.jsxs("main",{children:[c.jsx(ft,{}),c.jsx(pt,{}),o&&c.jsx("div",{className:M("description-panel",{visible:!!o}),children:c.jsx("p",{children:o})}),c.jsxs("div",{className:"fixed bottom-4 left-4 flex gap-2 z-20",children:[c.jsx("button",{onClick:()=>ie("sphere"),className:M("px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",e==="sphere"?"bg-blue-500 text-white shadow-lg":"bg-gray-800 bg-opacity-80 text-gray-300 hover:bg-gray-700"),children:"Sphere"}),c.jsx("button",{onClick:()=>ie("grid"),className:M("px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",e==="grid"?"bg-blue-500 text-white shadow-lg":"bg-gray-800 bg-opacity-80 text-gray-300 hover:bg-gray-700"),children:"Grid"})]}),c.jsx("button",{onClick:ct,className:M("sidebarButton iconButton",{active:t}),"aria-label":"Toggle photo list",title:"Toggle photo list",children:c.jsx("span",{className:"icon",children:"list"})}),c.jsxs("div",{style:{position:"fixed",bottom:"10px",right:"10px",backgroundColor:"rgba(0,0,0,0.5)",color:"white",padding:"5px 10px",borderRadius:"3px",fontSize:"12px",zIndex:1e4},children:["Camera Z: ",n.toFixed(2)," | Layout: ",e]})]})}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/console.log("[main.tsx] Script start");console.log("[main.tsx] Rendering React app");const he=document.getElementById("root");he?Me.createRoot(he).render(c.jsx(gt,{})):console.error("[main.tsx] Root element not found");
//# sourceMappingURL=index-BmFKrmIV.js.map
