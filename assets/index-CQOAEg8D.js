import{u as Ce,R as De,r as m,V as S,T as Re,a as ye,j as c,B as Fe,D as Te,M as V,C as ke,b as Ne,c as qe,d as Me}from"./three-QvK4sKc3.js";import"./vendor-BtP0CW_r.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function be(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=be(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function M(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=be(e))&&(n&&(n+=" "),n+=t);return n}const Le={},de=e=>{let t;const r=new Set,n=(g,u)=>{const I=typeof g=="function"?g(t):g;if(!Object.is(I,t)){const v=t;t=u??(typeof I!="object"||I===null)?I:Object.assign({},t,I),r.forEach(w=>w(t,v))}},i=()=>t,p={setState:n,getState:i,getInitialState:()=>P,subscribe:g=>(r.add(g),()=>r.delete(g)),destroy:()=>{(Le?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},P=t=e(n,i,p);return p},$e=e=>e?de(e):de,xe={},{useDebugValue:Ue}=De,{useSyncExternalStoreWithSelector:We}=Ce;let ue=!1;const Ze=e=>e;function Be(e,t=Ze,r){(xe?"production":void 0)!=="production"&&r&&!ue&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ue=!0);const n=We(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Ue(n),n}const le=e=>{(xe?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?$e(e):e,r=(n,i)=>Be(t,n,i);return Object.assign(r,t),r},Ge=e=>e?le(e):le;var Ie=Symbol.for("immer-nothing"),me=Symbol.for("immer-draftable"),h=Symbol.for("immer-state");function x(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var D=Object.getPrototypeOf;function R(e){return!!e&&!!e[h]}function j(e){var t;return e?Pe(e)||Array.isArray(e)||!!e[me]||!!((t=e.constructor)!=null&&t[me])||Z(e)||B(e):!1}var He=Object.prototype.constructor.toString();function Pe(e){if(!e||typeof e!="object")return!1;const t=D(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===He}function L(e,t){W(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function W(e){const t=e[h];return t?t.type_:Array.isArray(e)?1:Z(e)?2:B(e)?3:0}function X(e,t){return W(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Se(e,t,r){const n=W(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Ke(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Z(e){return e instanceof Map}function B(e){return e instanceof Set}function A(e){return e.copy_||e.base_}function Y(e,t){if(Z(e))return new Map(e);if(B(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Pe(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[h];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){const a=i[o],s=n[a];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(D(e),n)}else{const n=D(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function ie(e,t=!1){return G(e)||R(e)||!j(e)||(W(e)>1&&(e.set=e.add=e.clear=e.delete=Qe),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>ie(n,!0))),e}function Qe(){x(2)}function G(e){return Object.isFrozen(e)}var Ve={};function z(e){const t=Ve[e];return t||x(0,e),t}var k;function ve(){return k}function Xe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function fe(e,t){t&&(z("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function J(e){ee(e),e.drafts_.forEach(Ye),e.drafts_=null}function ee(e){e===k&&(k=e.parent_)}function pe(e){return k=Xe(k,e)}function Ye(e){const t=e[h];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ge(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[h].modified_&&(J(t),x(4)),j(e)&&(e=$(t,e),t.parent_||U(t,e)),t.patches_&&z("Patches").generateReplacementPatches_(r[h].base_,e,t.patches_,t.inversePatches_)):e=$(t,r,[]),J(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ie?e:void 0}function $(e,t,r){if(G(t))return t;const n=t[h];if(!n)return L(t,(i,o)=>_e(e,n,t,i,o,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return U(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let o=i,a=!1;n.type_===3&&(o=new Set(i),i.clear(),a=!0),L(o,(s,p)=>_e(e,n,i,s,p,r,a)),U(e,i,!1),r&&e.patches_&&z("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function _e(e,t,r,n,i,o,a){if(R(i)){const s=o&&t&&t.type_!==3&&!X(t.assigned_,n)?o.concat(n):void 0,p=$(e,i,s);if(Se(r,n,p),R(p))e.canAutoFreeze_=!1;else return}else a&&r.add(i);if(j(i)&&!G(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;$(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&U(e,i)}}function U(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ie(t,r)}function Je(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:ve(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,o=oe;r&&(i=[n],o=N);const{revoke:a,proxy:s}=Proxy.revocable(i,o);return n.draft_=s,n.revoke_=a,s}var oe={get(e,t){if(t===h)return e;const r=A(e);if(!X(r,t))return et(e,r,t);const n=r[t];return e.finalized_||!j(n)?n:n===H(e.base_,t)?(K(e),e.copy_[t]=re(n,e)):n},has(e,t){return t in A(e)},ownKeys(e){return Reflect.ownKeys(A(e))},set(e,t,r){const n=we(A(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=H(A(e),t),o=i==null?void 0:i[h];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Ke(r,i)&&(r!==void 0||X(e.base_,t)))return!0;K(e),te(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return H(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,K(e),te(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=A(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){x(11)},getPrototypeOf(e){return D(e.base_)},setPrototypeOf(){x(12)}},N={};L(oe,(e,t)=>{N[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});N.deleteProperty=function(e,t){return N.set.call(this,e,t,void 0)};N.set=function(e,t,r){return oe.set.call(this,e[0],t,r,e[0])};function H(e,t){const r=e[h];return(r?A(r):e)[t]}function et(e,t,r){var i;const n=we(t,r);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function we(e,t){if(!(t in e))return;let r=D(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=D(r)}}function te(e){e.modified_||(e.modified_=!0,e.parent_&&te(e.parent_))}function K(e){e.copy_||(e.copy_=Y(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var tt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const o=r;r=t;const a=this;return function(p=o,...P){return a.produce(p,g=>r.call(this,g,...P))}}typeof r!="function"&&x(6),n!==void 0&&typeof n!="function"&&x(7);let i;if(j(t)){const o=pe(this),a=re(t,void 0);let s=!0;try{i=r(a),s=!1}finally{s?J(o):ee(o)}return fe(o,n),ge(i,o)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===Ie&&(i=void 0),this.autoFreeze_&&ie(i,!0),n){const o=[],a=[];z("Patches").generateReplacementPatches_(t,i,o,a),n(o,a)}return i}else x(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(a,...s)=>this.produceWithPatches(a,p=>t(p,...s));let n,i;return[this.produce(t,r,(a,s)=>{n=a,i=s}),n,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){j(e)||x(8),R(e)&&(e=rt(e));const t=pe(this),r=re(e,void 0);return r[h].isManual_=!0,ee(t),r}finishDraft(e,t){const r=e&&e[h];(!r||!r.isManual_)&&x(9);const{scope_:n}=r;return fe(n,t),ge(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=z("Patches").applyPatches_;return R(e)?n(e,t):this.produce(e,i=>n(i,t))}};function re(e,t){const r=Z(e)?z("MapSet").proxyMap_(e,t):B(e)?z("MapSet").proxySet_(e,t):Je(e,t);return(t?t.scope_:ve()).drafts_.push(r),r}function rt(e){return R(e)||x(10,e),Ae(e)}function Ae(e){if(!j(e)||G(e))return e;const t=e[h];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Y(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Y(e,!0);return L(r,(n,i)=>{Se(r,n,Ae(i))}),t&&(t.finalized_=!1),r}var y=new tt,nt=y.produce;y.produceWithPatches.bind(y);y.setAutoFreeze.bind(y);y.setUseStrictShallowCopy.bind(y);y.applyPatches.bind(y);y.createDraft.bind(y);y.finishDraft.bind(y);const it=e=>(t,r,n)=>(n.setState=(i,o,...a)=>{const s=typeof i=="function"?nt(i):i;return t(s,o,...a)},e(n.setState,r,n)),ot=it;/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const O=Ge(ot(e=>({didInit:!1,images:null,layout:"sphere",layouts:null,nodePositions:null,highlightNodes:null,isSidebarOpen:!1,targetImage:null,resetCam:!1,cameraCurrentZ:0}))),at=[{id:"Img_bea_01.png",description:"Uma bela vista da categoria 'bea', item nÃºmero 1. Detalhes incrÃ­veis e cores vibrantes."},{id:"Img_bea_02.png",description:"Explorando o item 2 da sÃ©rie 'bea'. Uma composiÃ§Ã£o verdadeiramente inspiradora."},{id:"Img_bea_03.png",description:"A terceira imagem da coleÃ§Ã£o 'bea', capturando um momento Ãºnico e especial."},{id:"Img_bea_04.png",description:"Item 'bea' de nÃºmero 4. A luz e sombra criam uma atmosfera mÃ¡gica aqui."},{id:"Img_bea_05.png",description:"Descobrindo a beleza no quinto exemplar 'bea'. Uma cena para ser admirada."},{id:"Img_bea_06.png",description:"Sexta representaÃ§Ã£o 'bea'. Texturas ricas e uma perspectiva envolvente."},{id:"Img_bea_07.png",description:"A arte em 'bea', nÃºmero 7. Cada detalhe conta uma histÃ³ria diferente."},{id:"Img_bea_08.png",description:"Oitava maravilha da sÃ©rie 'bea'. Um convite Ã  contemplaÃ§Ã£o e imaginaÃ§Ã£o."},{id:"Img_bea_09.png",description:"Quase no fim da linha 'bea', imagem 9. Simplesmente espetacular e memorÃ¡vel."},{id:"Img_bea_10.png",description:"Fechando a categoria 'bea' com a dÃ©cima imagem. Uma obra-prima visual."},{id:"Img_skate_01.png",description:"Radical! A primeira imagem de 'skate'. Manobras e estilo em cada pixel."},{id:"Img_skate_02.png",description:"Item 2 da sÃ©rie 'skate'. A cultura urbana capturada em um instante."},{id:"Img_skate_03.png",description:"A terceira imagem da coleÃ§Ã£o 'skate', mostrando a energia das ruas."},{id:"Img_skate_04.png",description:"Adrenalina pura no item 'skate' de nÃºmero 4. Liberdade sobre rodas."},{id:"Img_skate_05.png",description:"O quinto exemplar 'skate'. A arte do equilÃ­brio e da criatividade."},{id:"Img_skate_06.png",description:"Sexta foto 'skate'. Um olhar sobre a paixÃ£o pelo esporte e pela vida."},{id:"Img_skate_07.png",description:"A vibe 'skate' no nÃºmero 7. ExpressÃ£o e movimento em harmonia."},{id:"Img_skate_08.png",description:"Oitava imagem da sÃ©rie 'skate'. Superando limites e desafiando a gravidade."},{id:"Img_skate_09.png",description:"Chegando ao fim da sessÃ£o 'skate', imagem 9. Atitude e originalidade."},{id:"Img_skate_10.png",description:"Encerrando a categoria 'skate' com a imagem 10. Puro talento e dedicaÃ§Ã£o."},{id:"Img_head_01.png",description:"Foco no detalhe: primeira imagem 'head'. ExpressÃµes que falam por si."},{id:"Img_head_02.png",description:"Item 2 da sÃ©rie 'head'. Um retrato da individualidade e estilo."},{id:"Img_head_03.png",description:"A terceira imagem 'head', capturando a essÃªncia e a personalidade."},{id:"Img_head_04.png",description:"Olhares e pensamentos no item 'head' de nÃºmero 4. Profundidade e emoÃ§Ã£o."},{id:"Img_head_05.png",description:"O quinto exemplar 'head'. A beleza estÃ¡ nos detalhes Ãºnicos."},{id:"Img_head_06.png",description:"Sexta foto 'head'. Uma janela para a alma e suas histÃ³rias."},{id:"Img_head_07.png",description:"A perspectiva 'head' no nÃºmero 7. Cada rosto, um universo."},{id:"Img_head_08.png",description:"Oitava imagem da sÃ©rie 'head'. ForÃ§a, carÃ¡ter e autenticidade."},{id:"Img_head_09.png",description:"Retrato finalizando a sÃ©rie 'head', imagem 9. Singularidade em destaque."},{id:"Img_head_10.png",description:"Concluindo 'head' com a dÃ©cima imagem. A histÃ³ria por trÃ¡s de cada olhar."},{id:"Img_tenis_01.png",description:"Estilo nos pÃ©s: imagem 1 de 'tenis'. Design e conforto se encontram."},{id:"Img_tenis_02.png",description:"Item 2 da sÃ©rie 'tenis'. Mais que um calÃ§ado, uma declaraÃ§Ã£o."},{id:"Img_tenis_03.png",description:"A terceira imagem 'tenis', mostrando inovaÃ§Ã£o e atitude."},{id:"Img_tenis_04.png",description:"Performance e moda no item 'tenis' nÃºmero 4. Pronto para qualquer jornada."},{id:"Img_tenis_05.png",description:"O quinto exemplar 'tenis'. Detalhes que fazem toda a diferenÃ§a."},{id:"Img_tenis_06.png",description:"Sexta foto 'tenis'. A combinaÃ§Ã£o perfeita de funcionalidade e estÃ©tica."},{id:"Img_tenis_07.png",description:"A tendÃªncia 'tenis' no nÃºmero 7. Conectando vocÃª ao seu caminho."},{id:"Img_tenis_08.png",description:"Oitava imagem da sÃ©rie 'tenis'. Durabilidade e um visual impecÃ¡vel."},{id:"Img_tenis_09.png",description:"Quase lÃ¡ na coleÃ§Ã£o 'tenis', imagem 9. Para quem nÃ£o abre mÃ£o de estilo."},{id:"Img_tenis_10.png",description:"Fechando 'tenis' com a dÃ©cima imagem. A escolha certa para seus passos."},{id:"Img_bag_01.png",description:"AcessÃ³rio essencial: primeira imagem 'bag'. Praticidade e elegÃ¢ncia."},{id:"Img_bag_02.png",description:"Item 2 da sÃ©rie 'bag'. Leve tudo o que precisa com muito estilo."},{id:"Img_bag_03.png",description:"A terceira imagem 'bag', design inteligente para o dia a dia."},{id:"Img_bag_04.png",description:"Funcionalidade e charme no item 'bag' nÃºmero 4. Sua companheira ideal."},{id:"Img_bag_05.png",description:"O quinto exemplar 'bag'. Detalhes que refletem sua personalidade."},{id:"Img_bag_06.png",description:"Sexta foto 'bag'. OrganizaÃ§Ã£o e um toque de sofisticaÃ§Ã£o."},{id:"Img_bag_07.png",description:"O look completo com 'bag' nÃºmero 7. Versatilidade para todas as ocasiÃµes."},{id:"Img_bag_08.png",description:"Oitava imagem da sÃ©rie 'bag'. Qualidade e design que impressionam."},{id:"Img_bag_09.png",description:"Finalizando a coleÃ§Ã£o 'bag', imagem 9. O detalhe que faltava."},{id:"Img_bag_10.png",description:"Concluindo 'bag' com a dÃ©cima imagem. Perfeita para suas aventuras."},{id:"Img_food_01.png",description:"DelÃ­cia Ã  vista: primeira imagem 'food'. Sabores que encantam."},{id:"Img_food_02.png",description:"Item 2 da sÃ©rie 'food'. Uma experiÃªncia gastronÃ´mica inesquecÃ­vel."},{id:"Img_food_03.png",description:"A terceira imagem 'food', arte culinÃ¡ria que inspira."},{id:"Img_food_04.png",description:"Ingredientes frescos e paixÃ£o no item 'food' nÃºmero 4. Para todos os paladares."},{id:"Img_food_05.png",description:"O quinto exemplar 'food'. Uma verdadeira festa de cores e sabores."},{id:"Img_food_06.png",description:"Sexta foto 'food'. TradiÃ§Ã£o e inovaÃ§Ã£o em cada prato."},{id:"Img_food_07.png",description:"O prazer de comer bem com 'food' nÃºmero 7. Momentos deliciosos."},{id:"Img_food_08.png",description:"Oitava imagem da sÃ©rie 'food'. Da cozinha para sua mesa, com carinho."},{id:"Img_food_09.png",description:"Quase na sobremesa da coleÃ§Ã£o 'food', imagem 9. Uma tentaÃ§Ã£o irresistÃ­vel."},{id:"Img_food_10.png",description:"Fechando o cardÃ¡pio 'food' com a dÃ©cima imagem. Bom apetite e volte sempre!"}];/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const Oe=O.getState,F=O.setState,st=async()=>{if(Oe().didInit)return;F(o=>{o.didInit=!0});const[e,t]=await Promise.all(["sphere","umap-grid"].map(o=>fetch(`/picture-site/${o}.json`).then(a=>a.json()))),r=at,n=Object.values(e),i=Object.values(t).map(([o,a])=>[o,a/(16/9)+.25]);F(o=>{o.images=r,o.rawLayoutPositions={sphere:n,grid:i},o.nodePositions=Object.fromEntries(r.map(({id:a})=>[a,[.5,.5,.5]])),o.layouts={}}),ne("sphere")},ne=e=>{F(t=>{t.layout=e;const r=t.rawLayoutPositions[e];if(!r){console.error(`Layout positions for "${e}" not found in state.rawLayoutPositions.`),t.nodePositions=Object.fromEntries(t.images.map(({id:i})=>[i,[.5,.5,.5]]));return}const n={};t.images.forEach((i,o)=>{o<r.length?n[i.id]=r[o]:n[i.id]=r[r.length-1]||[.5,.5,.5]}),t.nodePositions=n})},ae=async e=>{e===Oe().targetImage&&(e=null),F(t=>{t.targetImage=e,t.highlightNodes=null,e===null&&(t.resetCam=!0)})},ct=()=>{F(e=>{e.isSidebarOpen=!e.isSidebarOpen})},dt=e=>{F(t=>{t.isSidebarOpen=e})},ut=16/16,se=16,je=se*ut;console.log("ðŸ”¥ TAMANHO DAS IMAGENS:",se,"x",je);const lt=({id:e,position:t,targetImage:r})=>{const n=`/picture-site/assets/images/${e}`,i=m.useRef(),o=m.useRef(),[a,s]=m.useState(null),[p,P]=m.useState(!1),[g,u]=m.useState(!1),I=m.useRef(new S(...t)),v=m.useRef(new S(...t)),w=m.useRef(1),E=m.useRef(0),T=m.useRef(1),C=m.useRef(1);m.useEffect(()=>{new Re().load(n,l=>{s(l),P(!0)},void 0,l=>{console.error(`[PhotoNode.jsx] Failed to load texture for ${e}:`,l),P(!0)})},[n,e]),m.useEffect(()=>{I.current.set(...t)},[t]);const d=r===e;return m.useEffect(()=>{!r||d?(w.current=1,T.current=d?1.2:1):(w.current=.3,T.current=.8)},[r,d]),ye((f,l)=>{if(p&&(o.current&&(v.current.lerp(I.current,l*3),o.current.position.copy(v.current)),i.current&&i.current.material)){E.current=V.lerp(E.current,w.current,l*4),i.current.material.opacity=E.current,C.current=V.lerp(C.current,T.current,l*5);const _=g?1.1:1,b=C.current*_;i.current.scale.setScalar(b)}}),p?c.jsx("group",{ref:o,onClick:f=>{f.stopPropagation(),ae(e)},onPointerEnter:()=>u(!0),onPointerLeave:()=>u(!1),children:c.jsx(Fe,{children:c.jsxs("mesh",{ref:i,scale:[je,se,1],children:[c.jsx("planeGeometry",{}),c.jsx("meshStandardMaterial",{map:a,color:a?"white":"red",transparent:!0,opacity:E.current,side:Te})]})})}):null};function mt(){const{images:e,nodePositions:t,layout:r,targetImage:n,resetCam:i}=O(d=>({images:d.images,nodePositions:d.nodePositions,layout:d.layout,targetImage:d.targetImage,resetCam:d.resetCam})),{camera:o}=Ne(),a=m.useRef(),s=m.useRef(),[p,P]=m.useState(!1),g=m.useRef(0),u=m.useRef({isAnimating:!1,startTime:0,duration:800,startPosition:new S,targetPosition:new S,startTarget:new S,targetTarget:new S}),I=.1,v=.5,w=25,E=()=>{P(!1),g.current=0,u.current.isAnimating=!1},T=()=>{},C=d=>d<.5?2*d*d:-1+(4-2*d)*d;return m.useEffect(()=>{if(o&&s.current&&a.current){if(n&&t){P(!1),g.current=0;const d=t[n];if(!d){console.warn(`No node position found for targetImage: ${n}`);return}const f=(d[0]-.5)*600,l=(d[1]-.5)*600,_=((d[2]||0)-.5)*600,b=a.current.rotation.y,ze=a.current.position.z,ce=new S(f*Math.cos(b)-_*Math.sin(b),l,f*Math.sin(b)+_*Math.cos(b)+ze),q=o.position.clone().sub(s.current.target);q.lengthSq()===0&&q.set(0,0,1),q.normalize().multiplyScalar(w);const Ee=ce.clone().add(q);u.current.isAnimating=!0,u.current.startTime=Date.now(),u.current.startPosition.copy(o.position),u.current.targetPosition.copy(Ee),u.current.startTarget.copy(s.current.target),u.current.targetTarget.copy(ce)}else if(!n){const d=new S(0,0,300),f=new S(0,0,0);u.current.isAnimating=!0,u.current.startTime=Date.now(),u.current.startPosition.copy(o.position),u.current.targetPosition.copy(d),u.current.startTarget.copy(s.current.target),u.current.targetTarget.copy(f)}}},[n,t,o]),m.useEffect(()=>{if(a.current){const d=r==="grid"?150:0,f=a.current.position.z,l=()=>{let _=0;const b=()=>{if(_+=.02,_>=1){a.current.position.z=d;return}a.current.position.z=V.lerp(f,d,C(_)),requestAnimationFrame(b)};b()};Math.abs(f-d)>.1&&l(),i&&(a.current.rotation.set(0,0,0),O.setState(_=>{_.resetCam=!1}))}},[r,i]),ye((d,f)=>{if(O.setState({cameraCurrentZ:o.position.z}),u.current.isAnimating&&o&&s.current){const l=Date.now()-u.current.startTime,_=Math.min(l/u.current.duration,1),b=C(_);o.position.lerpVectors(u.current.startPosition,u.current.targetPosition,b),s.current.target.lerpVectors(u.current.startTarget,u.current.targetTarget,b),_>=1&&(u.current.isAnimating=!1,o.position.copy(u.current.targetPosition),s.current.target.copy(u.current.targetTarget))}if(!u.current.isAnimating){let l=g.current;p?l+=(I-l)*v*f:l+=(0-l)*v*f,g.current=l,a.current&&Math.abs(l)>1e-4&&r!=="grid"&&!n&&(a.current.rotation.y+=l*f)}s.current&&s.current.update()}),c.jsxs(c.Fragment,{children:[c.jsx("ambientLight",{intensity:2.3}),c.jsx(qe,{ref:s,onStart:E,onEnd:T,minDistance:20,maxDistance:1e3,noPan:!0}),c.jsx("group",{ref:a,children:e==null?void 0:e.map(d=>{const f=t==null?void 0:t[d.id];if(!f)return console.warn(`[PhotoViz.jsx] No position found for image ID: ${d.id}`),null;const l=[(f[0]-.5)*500,(f[1]-.5)*500,((f[2]||0)-.5)*500];return c.jsx(lt,{id:d.id,position:l,targetImage:n},d.id)})})]})}function ft(){return c.jsx(ke,{camera:{position:[0,0,300],near:.1,far:1e4},onPointerMissed:()=>ae(null),children:c.jsx(mt,{})})}const Q=(e,t=7)=>{if(!e)return"";const r=e.split(" ");return r.length<=t?e:r.slice(0,t).join(" ")+" ..."},pt=()=>{const{images:e,targetImage:t,isSidebarOpen:r}=O(a=>({images:a.images,targetImage:a.targetImage,isSidebarOpen:a.isSidebarOpen})),n=e?e.find(a=>a.id===t):null,i=e?[...e].sort((a,s)=>a.id.localeCompare(s.id)):[],o=()=>{dt(!r)};return c.jsxs("div",{className:`fixed top-0 right-0 h-full bg-gray-800 bg-opacity-90 text-white p-4 transition-transform duration-300 ease-in-out transform ${r?"translate-x-0":"translate-x-full"} w-80 md:w-96 z-30 shadow-lg`,children:[c.jsx("button",{onClick:o,className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors text-2xl z-40 w-8 h-8 flex items-center justify-center",children:"Ã—"}),n&&c.jsxs("div",{className:"mb-6 pt-8",children:[c.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Selected Image"}),c.jsxs("div",{className:"bg-gray-700 p-3 rounded-lg shadow-md",children:[c.jsx("img",{src:`/picture-site/assets/images/${n.id}`,alt:n.description,className:"w-full h-auto object-cover rounded-md mb-2 shadow-sm"}),c.jsx("p",{className:"text-sm text-gray-300 leading-relaxed",children:Q(n.description,3)})]})]}),c.jsxs("ul",{children:[i.map(a=>c.jsxs("li",{onClick:()=>ae(a.id),className:`cursor-pointer p-2 hover:bg-gray-700 rounded-md transition-colors duration-150 flex items-center space-x-3 ${t===a.id?"bg-blue-500 bg-opacity-40":""}`,children:[c.jsx("img",{src:`/picture-site/assets/images/${a.id}`,alt:Q(a.description,3),className:"w-32 h-32 object-cover rounded-sm shadow-sm"}),c.jsx("div",{children:c.jsx("p",{children:Q(a.description,3)})})]},a.id)),(!e||e.length===0)&&c.jsx("li",{children:"No images available."})]})]})};function gt(){var a;const{layout:e,isSidebarOpen:t,images:r,targetImage:n,cameraCurrentZ:i}=O(s=>({layout:s.layout,isSidebarOpen:s.isSidebarOpen,images:s.images,targetImage:s.targetImage,cameraCurrentZ:s.cameraCurrentZ})),o=n&&r?(a=r.find(s=>s.id===n))==null?void 0:a.description:null;return m.useEffect(()=>{st()},[]),c.jsxs("main",{children:[c.jsx(ft,{}),c.jsx(pt,{}),o&&c.jsx("div",{className:M("description-panel",{visible:!!o}),children:c.jsx("p",{children:o})}),c.jsxs("div",{className:"fixed bottom-4 left-4 flex gap-2 z-20",children:[c.jsx("button",{onClick:()=>ne("sphere"),className:M("px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",e==="sphere"?"bg-blue-500 text-white shadow-lg":"bg-gray-800 bg-opacity-80 text-gray-300 hover:bg-gray-700"),children:"Sphere"}),c.jsx("button",{onClick:()=>ne("grid"),className:M("px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",e==="grid"?"bg-blue-500 text-white shadow-lg":"bg-gray-800 bg-opacity-80 text-gray-300 hover:bg-gray-700"),children:"Grid"})]}),c.jsx("button",{onClick:ct,className:M("sidebarButton iconButton",{active:t}),"aria-label":"Toggle photo list",title:"Toggle photo list",children:c.jsx("span",{className:"icon",children:"list"})}),c.jsxs("div",{style:{position:"fixed",bottom:"10px",right:"10px",backgroundColor:"rgba(0,0,0,0.5)",color:"white",padding:"5px 10px",borderRadius:"3px",fontSize:"12px",zIndex:1e4},children:["Camera Z: ",i.toFixed(2)," | Layout: ",e]})]})}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/console.log("[main.tsx] Script start");console.log("[main.tsx] Rendering React app");const he=document.getElementById("root");he?Me.createRoot(he).render(c.jsx(gt,{})):console.error("[main.tsx] Root element not found");
//# sourceMappingURL=index-CQOAEg8D.js.map
