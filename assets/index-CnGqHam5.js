import{c as pe,r as f,T as _e,u as ae,j as c,B as he,D as ye,M as be,C as xe,a as Ie,b as Se,d as Pe}from"./three-Ck9X7SiJ.js";import"./vendor-BtP0CW_r.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=i(o);fetch(o.href,n)}})();function se(e){var t,i,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(i=se(e[t]))&&(r&&(r+=" "),r+=i)}else for(i in e)e[i]&&(r&&(r+=" "),r+=i);return r}function H(){for(var e,t,i=0,r="",o=arguments.length;i<o;i++)(e=arguments[i])&&(t=se(e))&&(r&&(r+=" "),r+=t);return r}var ce=Symbol.for("immer-nothing"),Y=Symbol.for("immer-draftable"),u=Symbol.for("immer-state");function g(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var v=Object.getPrototypeOf;function O(e){return!!e&&!!e[u]}function S(e){var t;return e?de(e)||Array.isArray(e)||!!e[Y]||!!((t=e.constructor)!=null&&t[Y])||k(e)||E(e):!1}var je=Object.prototype.constructor.toString();function de(e){if(!e||typeof e!="object")return!1;const t=v(e);if(t===null)return!0;const i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return i===Object?!0:typeof i=="function"&&Function.toString.call(i)===je}function D(e,t){F(e)===0?Reflect.ownKeys(e).forEach(i=>{t(i,e[i],e)}):e.forEach((i,r)=>t(r,i,e))}function F(e){const t=e[u];return t?t.type_:Array.isArray(e)?1:k(e)?2:E(e)?3:0}function U(e,t){return F(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function le(e,t,i){const r=F(e);r===2?e.set(t,i):r===3?e.add(i):e[t]=i}function ve(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function k(e){return e instanceof Map}function E(e){return e instanceof Set}function x(e){return e.copy_||e.base_}function B(e,t){if(k(e))return new Map(e);if(E(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const i=de(e);if(t===!0||t==="class_only"&&!i){const r=Object.getOwnPropertyDescriptors(e);delete r[u];let o=Reflect.ownKeys(r);for(let n=0;n<o.length;n++){const a=o[n],s=r[a];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(v(e),r)}else{const r=v(e);if(r!==null&&i)return{...e};const o=Object.create(r);return Object.assign(o,e)}}function V(e,t=!1){return $(e)||O(e)||!S(e)||(F(e)>1&&(e.set=e.add=e.clear=e.delete=Oe),Object.freeze(e),t&&Object.entries(e).forEach(([i,r])=>V(r,!0))),e}function Oe(){g(2)}function $(e){return Object.isFrozen(e)}var we={};function P(e){const t=we[e];return t||g(0,e),t}var A;function ue(){return A}function Ae(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ee(e,t){t&&(P("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function J(e){Z(e),e.drafts_.forEach(ze),e.drafts_=null}function Z(e){e===A&&(A=e.parent_)}function te(e){return A=Ae(A,e)}function ze(e){const t=e[u];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ie(e,t){t.unfinalizedDrafts_=t.drafts_.length;const i=t.drafts_[0];return e!==void 0&&e!==i?(i[u].modified_&&(J(t),g(4)),S(e)&&(e=N(t,e),t.parent_||R(t,e)),t.patches_&&P("Patches").generateReplacementPatches_(i[u].base_,e,t.patches_,t.inversePatches_)):e=N(t,i,[]),J(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ce?e:void 0}function N(e,t,i){if($(t))return t;const r=t[u];if(!r)return D(t,(o,n)=>re(e,r,t,o,n,i)),t;if(r.scope_!==e)return t;if(!r.modified_)return R(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let n=o,a=!1;r.type_===3&&(n=new Set(o),o.clear(),a=!0),D(n,(s,l)=>re(e,r,o,s,l,i,a)),R(e,o,!1),i&&e.patches_&&P("Patches").generatePatches_(r,i,e.patches_,e.inversePatches_)}return r.copy_}function re(e,t,i,r,o,n,a){if(O(o)){const s=n&&t&&t.type_!==3&&!U(t.assigned_,r)?n.concat(r):void 0,l=N(e,o,s);if(le(i,r,l),O(l))e.canAutoFreeze_=!1;else return}else a&&i.add(o);if(S(o)&&!$(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;N(e,o),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(i,r)&&R(e,o)}}function R(e,t,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&V(t,i)}function Ce(e,t){const i=Array.isArray(e),r={type_:i?1:0,scope_:t?t.scope_:ue(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,n=X;i&&(o=[r],n=z);const{revoke:a,proxy:s}=Proxy.revocable(o,n);return r.draft_=s,r.revoke_=a,s}var X={get(e,t){if(t===u)return e;const i=x(e);if(!U(i,t))return De(e,i,t);const r=i[t];return e.finalized_||!S(r)?r:r===L(e.base_,t)?(M(e),e.copy_[t]=W(r,e)):r},has(e,t){return t in x(e)},ownKeys(e){return Reflect.ownKeys(x(e))},set(e,t,i){const r=me(x(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,i),!0;if(!e.modified_){const o=L(x(e),t),n=o==null?void 0:o[u];if(n&&n.base_===i)return e.copy_[t]=i,e.assigned_[t]=!1,!0;if(ve(i,o)&&(i!==void 0||U(e.base_,t)))return!0;M(e),K(e)}return e.copy_[t]===i&&(i!==void 0||t in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=i,e.assigned_[t]=!0),!0},deleteProperty(e,t){return L(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,M(e),K(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const i=x(e),r=Reflect.getOwnPropertyDescriptor(i,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:i[t]}},defineProperty(){g(11)},getPrototypeOf(e){return v(e.base_)},setPrototypeOf(){g(12)}},z={};D(X,(e,t)=>{z[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});z.deleteProperty=function(e,t){return z.set.call(this,e,t,void 0)};z.set=function(e,t,i){return X.set.call(this,e[0],t,i,e[0])};function L(e,t){const i=e[u];return(i?x(i):e)[t]}function De(e,t,i){var o;const r=me(t,i);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(e.draft_):void 0}function me(e,t){if(!(t in e))return;let i=v(e);for(;i;){const r=Object.getOwnPropertyDescriptor(i,t);if(r)return r;i=v(i)}}function K(e){e.modified_||(e.modified_=!0,e.parent_&&K(e.parent_))}function M(e){e.copy_||(e.copy_=B(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Ne=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,i,r)=>{if(typeof t=="function"&&typeof i!="function"){const n=i;i=t;const a=this;return function(l=n,...h){return a.produce(l,y=>i.call(this,y,...h))}}typeof i!="function"&&g(6),r!==void 0&&typeof r!="function"&&g(7);let o;if(S(t)){const n=te(this),a=W(t,void 0);let s=!0;try{o=i(a),s=!1}finally{s?J(n):Z(n)}return ee(n,r),ie(o,n)}else if(!t||typeof t!="object"){if(o=i(t),o===void 0&&(o=t),o===ce&&(o=void 0),this.autoFreeze_&&V(o,!0),r){const n=[],a=[];P("Patches").generateReplacementPatches_(t,o,n,a),r(n,a)}return o}else g(1,t)},this.produceWithPatches=(t,i)=>{if(typeof t=="function")return(a,...s)=>this.produceWithPatches(a,l=>t(l,...s));let r,o;return[this.produce(t,i,(a,s)=>{r=a,o=s}),r,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){S(e)||g(8),O(e)&&(e=Re(e));const t=te(this),i=W(e,void 0);return i[u].isManual_=!0,Z(t),i}finishDraft(e,t){const i=e&&e[u];(!i||!i.isManual_)&&g(9);const{scope_:r}=i;return ee(r,t),ie(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let i;for(i=t.length-1;i>=0;i--){const o=t[i];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}i>-1&&(t=t.slice(i+1));const r=P("Patches").applyPatches_;return O(e)?r(e,t):this.produce(e,o=>r(o,t))}};function W(e,t){const i=k(e)?P("MapSet").proxyMap_(e,t):E(e)?P("MapSet").proxySet_(e,t):Ce(e,t);return(t?t.scope_:ue()).drafts_.push(i),i}function Re(e){return O(e)||g(10,e),fe(e)}function fe(e){if(!S(e)||$(e))return e;const t=e[u];let i;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,i=B(e,t.scope_.immer_.useStrictShallowCopy_)}else i=B(e,!0);return D(i,(r,o)=>{le(i,r,fe(o))}),t&&(t.finalized_=!1),i}var m=new Ne,Fe=m.produce;m.produceWithPatches.bind(m);m.setAutoFreeze.bind(m);m.setUseStrictShallowCopy.bind(m);m.applyPatches.bind(m);m.createDraft.bind(m);m.finishDraft.bind(m);const ke=e=>(t,i,r)=>(r.setState=(o,n,...a)=>{const s=typeof o=="function"?Fe(o):o;return t(s,n,...a)},e(r.setState,i,r)),Ee=ke;/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const I=pe(Ee(e=>({didInit:!1,images:null,layout:"sphere",layouts:null,nodePositions:null,highlightNodes:null,isSidebarOpen:!1,targetImage:null,resetCam:!1,cameraCurrentZ:0}))),oe=[{id:"Img_bea_01.png",description:"Uma bela vista da categoria 'bea', item número 1. Detalhes incríveis e cores vibrantes."},{id:"Img_bea_02.png",description:"Explorando o item 2 da série 'bea'. Uma composição verdadeiramente inspiradora."},{id:"Img_bea_03.png",description:"A terceira imagem da coleção 'bea', capturando um momento único e especial."},{id:"Img_bea_04.png",description:"Item 'bea' de número 4. A luz e sombra criam uma atmosfera mágica aqui."},{id:"Img_bea_05.png",description:"Descobrindo a beleza no quinto exemplar 'bea'. Uma cena para ser admirada."},{id:"Img_bea_06.png",description:"Sexta representação 'bea'. Texturas ricas e uma perspectiva envolvente."},{id:"Img_bea_07.png",description:"A arte em 'bea', número 7. Cada detalhe conta uma história diferente."},{id:"Img_bea_08.png",description:"Oitava maravilha da série 'bea'. Um convite à contemplação e imaginação."},{id:"Img_bea_09.png",description:"Quase no fim da linha 'bea', imagem 9. Simplesmente espetacular e memorável."},{id:"Img_bea_10.png",description:"Fechando a categoria 'bea' com a décima imagem. Uma obra-prima visual."},{id:"Img_skate_01.png",description:"Radical! A primeira imagem de 'skate'. Manobras e estilo em cada pixel."},{id:"Img_skate_02.png",description:"Item 2 da série 'skate'. A cultura urbana capturada em um instante."},{id:"Img_skate_03.png",description:"A terceira imagem da coleção 'skate', mostrando a energia das ruas."},{id:"Img_skate_04.png",description:"Adrenalina pura no item 'skate' de número 4. Liberdade sobre rodas."},{id:"Img_skate_05.png",description:"O quinto exemplar 'skate'. A arte do equilíbrio e da criatividade."},{id:"Img_skate_06.png",description:"Sexta foto 'skate'. Um olhar sobre a paixão pelo esporte e pela vida."},{id:"Img_skate_07.png",description:"A vibe 'skate' no número 7. Expressão e movimento em harmonia."},{id:"Img_skate_08.png",description:"Oitava imagem da série 'skate'. Superando limites e desafiando a gravidade."},{id:"Img_skate_09.png",description:"Chegando ao fim da sessão 'skate', imagem 9. Atitude e originalidade."},{id:"Img_skate_10.png",description:"Encerrando a categoria 'skate' com a imagem 10. Puro talento e dedicação."},{id:"Img_head_01.png",description:"Foco no detalhe: primeira imagem 'head'. Expressões que falam por si."},{id:"Img_head_02.png",description:"Item 2 da série 'head'. Um retrato da individualidade e estilo."},{id:"Img_head_03.png",description:"A terceira imagem 'head', capturando a essência e a personalidade."},{id:"Img_head_04.png",description:"Olhares e pensamentos no item 'head' de número 4. Profundidade e emoção."},{id:"Img_head_05.png",description:"O quinto exemplar 'head'. A beleza está nos detalhes únicos."},{id:"Img_head_06.png",description:"Sexta foto 'head'. Uma janela para a alma e suas histórias."},{id:"Img_head_07.png",description:"A perspectiva 'head' no número 7. Cada rosto, um universo."},{id:"Img_head_08.png",description:"Oitava imagem da série 'head'. Força, caráter e autenticidade."},{id:"Img_head_09.png",description:"Retrato finalizando a série 'head', imagem 9. Singularidade em destaque."},{id:"Img_head_10.png",description:"Concluindo 'head' com a décima imagem. A história por trás de cada olhar."},{id:"Img_tenis_01.png",description:"Estilo nos pés: imagem 1 de 'tenis'. Design e conforto se encontram."},{id:"Img_tenis_02.png",description:"Item 2 da série 'tenis'. Mais que um calçado, uma declaração."},{id:"Img_tenis_03.png",description:"A terceira imagem 'tenis', mostrando inovação e atitude."},{id:"Img_tenis_04.png",description:"Performance e moda no item 'tenis' número 4. Pronto para qualquer jornada."},{id:"Img_tenis_05.png",description:"O quinto exemplar 'tenis'. Detalhes que fazem toda a diferença."},{id:"Img_tenis_06.png",description:"Sexta foto 'tenis'. A combinação perfeita de funcionalidade e estética."},{id:"Img_tenis_07.png",description:"A tendência 'tenis' no número 7. Conectando você ao seu caminho."},{id:"Img_tenis_08.png",description:"Oitava imagem da série 'tenis'. Durabilidade e um visual impecável."},{id:"Img_tenis_09.png",description:"Quase lá na coleção 'tenis', imagem 9. Para quem não abre mão de estilo."},{id:"Img_tenis_10.png",description:"Fechando 'tenis' com a décima imagem. A escolha certa para seus passos."},{id:"Img_bag_01.png",description:"Acessório essencial: primeira imagem 'bag'. Praticidade e elegância."},{id:"Img_bag_02.png",description:"Item 2 da série 'bag'. Leve tudo o que precisa com muito estilo."},{id:"Img_bag_03.png",description:"A terceira imagem 'bag', design inteligente para o dia a dia."},{id:"Img_bag_04.png",description:"Funcionalidade e charme no item 'bag' número 4. Sua companheira ideal."},{id:"Img_bag_05.png",description:"O quinto exemplar 'bag'. Detalhes que refletem sua personalidade."},{id:"Img_bag_06.png",description:"Sexta foto 'bag'. Organização e um toque de sofisticação."},{id:"Img_bag_07.png",description:"O look completo com 'bag' número 7. Versatilidade para todas as ocasiões."},{id:"Img_bag_08.png",description:"Oitava imagem da série 'bag'. Qualidade e design que impressionam."},{id:"Img_bag_09.png",description:"Finalizando a coleção 'bag', imagem 9. O detalhe que faltava."},{id:"Img_bag_10.png",description:"Concluindo 'bag' com a décima imagem. Perfeita para suas aventuras."},{id:"Img_food_01.png",description:"Delícia à vista: primeira imagem 'food'. Sabores que encantam."},{id:"Img_food_02.png",description:"Item 2 da série 'food'. Uma experiência gastronômica inesquecível."},{id:"Img_food_03.png",description:"A terceira imagem 'food', arte culinária que inspira."},{id:"Img_food_04.png",description:"Ingredientes frescos e paixão no item 'food' número 4. Para todos os paladares."},{id:"Img_food_05.png",description:"O quinto exemplar 'food'. Uma verdadeira festa de cores e sabores."},{id:"Img_food_06.png",description:"Sexta foto 'food'. Tradição e inovação em cada prato."},{id:"Img_food_07.png",description:"O prazer de comer bem com 'food' número 7. Momentos deliciosos."},{id:"Img_food_08.png",description:"Oitava imagem da série 'food'. Da cozinha para sua mesa, com carinho."},{id:"Img_food_09.png",description:"Quase na sobremesa da coleção 'food', imagem 9. Uma tentação irresistível."},{id:"Img_food_10.png",description:"Fechando o cardápio 'food' com a décima imagem. Bom apetite e volte sempre!"}];/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const Q=I.getState,w=I.setState,$e=async()=>{if(console.log("[actions.js] init() called"),Q().didInit){console.log("[actions.js] init() already run, returning.");return}w(n=>{n.didInit=!0}),console.log("[actions.js] Fetching layout data...");const[e,t]=await Promise.all(["sphere","umap-grid"].map(n=>fetch(`/picture-site/${n}.json`).then(a=>a.json())));console.log("[actions.js] Layout data fetched:",{sphereLayoutData:e,umapGridLayoutData:t}),console.log("[actions.js] Imported localMeta:",oe);const i=oe,r=Object.values(e),o=Object.values(t).map(([n,a])=>[n,a/(16/9)+.25]);w(n=>{n.images=i,n.rawLayoutPositions={sphere:r,grid:o},n.nodePositions=Object.fromEntries(i.map(({id:a})=>[a,[.5,.5,.5]])),n.layouts={},console.log("[actions.js] State after setting images and layouts:",JSON.parse(JSON.stringify(n)))}),qe("sphere"),console.log("[actions.js] init() finished")},qe=e=>{console.log(`[actions.js] setLayout called with layout: ${e}`),w(t=>{t.layout=e;const i=t.rawLayoutPositions[e];if(!i){console.error(`Layout positions for "${e}" not found in state.rawLayoutPositions.`),t.nodePositions=Object.fromEntries(t.images.map(({id:o})=>[o,[.5,.5,.5]]));return}const r={};t.images.forEach((o,n)=>{n<i.length?r[o.id]=i[n]:r[o.id]=i[i.length-1]||[.5,.5,.5]}),t.nodePositions=r,console.log(`[actions.js] State after setLayout(${e}):`,JSON.parse(JSON.stringify(t)))})},G=async e=>{console.log(`[actions.js] setTargetImage called with: ${e}`),e===Q().targetImage&&(console.log("[actions.js] Unsetting targetImage."),e=null),w(t=>{t.targetImage=e,t.highlightNodes=null,e===null&&(t.resetCam=!0,console.log("[actions.js] resetCam set to true."))}),console.log(`[actions.js] targetImage set to: ${Q().targetImage}`)},Le=()=>{console.log("[actions.js] toggleSidebar called"),w(e=>{e.isSidebarOpen=!e.isSidebarOpen,console.log(`[actions.js] isSidebarOpen set to: ${e.isSidebarOpen}`)})},Me=e=>{console.log(`[actions.js] setSidebarOpen called with: ${e}`),w(t=>{t.isSidebarOpen=e,console.log(`[actions.js] isSidebarOpen set to: ${t.isSidebarOpen}`)})};$e();const Te=1,ge=16,Ue=ge*Te,Be=({id:e,position:t,targetImage:i})=>{const r=`/picture-site/assets/images/${e}`;console.log(`[PhotoNode.jsx] Loading texture for ID ${e} from URL: ${r}`);const o=f.useRef(),n=f.useRef(),[a,s]=f.useState(null),[l,h]=f.useState(!1);f.useEffect(()=>{new _e().load(r,b=>{s(b),h(!0),console.log(`[PhotoNode.jsx] Texture loaded for ${e}`)},void 0,b=>{console.error(`[PhotoNode.jsx] Failed to load texture for ${e}:`,b),h(!0)})},[r,e]),f.useEffect(()=>{n.current&&t&&n.current.position.set(...t)},[t]);const C=!i||i===e?1:.2;return ae((j,b)=>{if(o.current&&o.current.material&&l){const q=o.current.material.opacity,d=C;o.current.material.opacity=be.lerp(q,d,b*3)}}),l?c.jsx("group",{ref:n,onClick:j=>{j.stopPropagation(),G(e),console.log(`[PhotoNode.jsx] Clicked ${e}`)},children:c.jsx(he,{children:c.jsxs("mesh",{ref:o,scale:[Ue,ge,1],children:[c.jsx("planeGeometry",{}),c.jsx("meshBasicMaterial",{map:a,color:a?"white":"red",transparent:!0,opacity:C,side:ye})]})})}):null};function Je(){console.log("[PhotoViz.jsx] SceneContent rendering");const{images:e,nodePositions:t,layout:i,targetImage:r,resetCam:o}=I(d=>({images:d.images,nodePositions:d.nodePositions,layout:d.layout,targetImage:d.targetImage,resetCam:d.resetCam})),{camera:n}=Ie(),a=f.useRef(),s=f.useRef(),[l,h]=f.useState(!1),y=f.useRef(0),C=.1,j=.5,b=()=>{h(!1),y.current=0},q=()=>{};return f.useEffect(()=>{n&&s.current&&(r?(h(!1),y.current=0):(n.position.set(0,0,195),s.current.target.set(0,0,0)))},[r,n]),f.useEffect(()=>{a.current&&(i==="grid"?a.current.position.z=150:a.current.position.z=0,o&&(a.current.rotation.set(0,0,0),I.setState(d=>{d.resetCam=!1})))},[i,o]),ae((d,_)=>{I.setState({cameraCurrentZ:n.position.z});let p=y.current;l?p+=(C-p)*j*_:p+=(0-p)*j*_,y.current=p,a.current&&Math.abs(p)>1e-4&&i!=="grid"&&!r&&(a.current.rotation.y+=p*_),s.current&&s.current.update()}),console.log("[PhotoViz.jsx] SceneContent returning JSX"),c.jsxs(c.Fragment,{children:[c.jsx("ambientLight",{intensity:2.3}),c.jsx(Se,{ref:s,onStart:b,onEnd:q,minDistance:20,maxDistance:195,noPan:!0}),c.jsx("group",{ref:a,children:e==null?void 0:e.map(d=>{const _=t==null?void 0:t[d.id];if(!_)return console.warn(`[PhotoViz.jsx] No position found for image ID: ${d.id}`),null;const p=[(_[0]-.5)*600,(_[1]-.5)*600,((_[2]||0)-.5)*600];return c.jsx(Be,{id:d.id,position:p,targetImage:r},d.id)})})]})}function Ze(){return console.log("[PhotoViz.jsx] PhotoViz rendering"),c.jsx(xe,{camera:{position:[0,0,195],near:.1,far:1e4},onPointerMissed:()=>G(null),children:c.jsx(Je,{})})}const T=(e,t=7)=>{if(!e)return"";const i=e.split(" ");return i.length<=t?e:i.slice(0,t).join(" ")+" ..."},Ke=()=>{console.log("[Sidebar.jsx] Rendering Sidebar component");const{images:e,targetImage:t,isSidebarOpen:i}=I(a=>({images:a.images,targetImage:a.targetImage,isSidebarOpen:a.isSidebarOpen}));console.log("[Sidebar.jsx] Values from useStore:",{imagesLength:e==null?void 0:e.length,targetImage:t,isSidebarOpen:i});const r=e?e.find(a=>a.id===t):null;console.log("[Sidebar.jsx] selectedImage:",r?r.id:null);const o=e?[...e].sort((a,s)=>a.id.localeCompare(s.id)):[];console.log("[Sidebar.jsx] sortedImages length:",o.length);const n=()=>{Me(!i)};return console.log("[Sidebar.jsx] Returning JSX"),c.jsxs("div",{className:`fixed top-0 right-0 h-full bg-gray-800 bg-opacity-90 text-white p-4 transition-transform duration-300 ease-in-out transform ${i?"translate-x-0":"translate-x-full"} w-80 md:w-96 z-30 shadow-lg`,children:[c.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors text-2xl z-40 w-8 h-8 flex items-center justify-center",children:"×"}),r&&c.jsxs("div",{className:"mb-6 pt-8",children:[c.jsx("h2",{className:"text-2xl font-bold mb-3",children:"Selected Image"}),c.jsxs("div",{className:"bg-gray-700 p-3 rounded-lg shadow-md",children:[c.jsx("img",{src:`/picture-site/assets/images/${r.id}`,alt:r.description,className:"w-full h-auto object-cover rounded-md mb-2 shadow-sm"}),c.jsx("p",{className:"text-sm text-gray-300 leading-relaxed",children:T(r.description,3)})]})]}),c.jsxs("ul",{children:[o.map(a=>c.jsxs("li",{onClick:()=>G(a.id),className:`cursor-pointer p-2 hover:bg-gray-700 rounded-md transition-colors duration-150 flex items-center space-x-3 ${t===a.id?"bg-blue-500 bg-opacity-40":""}`,children:[c.jsx("img",{src:`/picture-site/assets/images/${a.id}`,alt:T(a.description,3),className:"w-16 h-16 object-cover rounded-sm shadow-sm"}),c.jsx("div",{children:c.jsx("p",{children:T(a.description,3)})})]},a.id)),(!e||e.length===0)&&c.jsx("li",{children:"No images available."})]})]})};function We(){var a;console.log("[App.jsx] Rendering App component");const{layout:e,isSidebarOpen:t,images:i,targetImage:r,cameraCurrentZ:o}=I(s=>(console.log("[App.jsx] useStore called, current state:",JSON.parse(JSON.stringify(s))),{layout:s.layout,isSidebarOpen:s.isSidebarOpen,images:s.images,targetImage:s.targetImage,cameraCurrentZ:s.cameraCurrentZ}));console.log("[App.jsx] Values from useStore:",{layout:e,isSidebarOpen:t,imagesLength:i==null?void 0:i.length,targetImage:r,cameraCurrentZ:o}),console.log("Current targetImage:",r);const n=r&&i?(a=i.find(s=>s.id===r))==null?void 0:a.description:null;return console.log("Current selectedImageDescription:",n),console.log("[App.jsx] Returning JSX"),c.jsxs("main",{children:[c.jsx(Ze,{}),c.jsx(Ke,{}),n&&c.jsx("div",{className:H("description-panel",{visible:!!n}),children:c.jsx("p",{children:n})}),c.jsx("button",{onClick:Le,className:H("sidebarButton iconButton",{active:t}),"aria-label":"Toggle photo list",title:"Toggle photo list",children:c.jsx("span",{className:"icon",children:"list"})}),c.jsxs("div",{style:{position:"fixed",bottom:"10px",left:"10px",backgroundColor:"rgba(0,0,0,0.5)",color:"white",padding:"5px 10px",borderRadius:"3px",fontSize:"12px",zIndex:1e4},children:["Camera Z: ",o.toFixed(2)]})]})}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/console.log("[main.tsx] Script start");console.log("[main.tsx] Rendering React app");const ne=document.getElementById("root");ne?Pe.createRoot(ne).render(c.jsx(We,{})):console.error("[main.tsx] Root element not found");
//# sourceMappingURL=index-CnGqHam5.js.map
